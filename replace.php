<?php

$traits = [
"Abomination",
"Agency",
"Ally",
"Altered",
"Ancient",
"Ancient",
"Arkham",
"Arkham",
"Armor",
"Artist",
"Assistant",
"Augury",
"Avatar",
"Bayou",
"Believer",
"Blessed",
"Blunder",
"Boat",
"Bold",
"Bridge",
"Byakhee",
"Bystander",
"Campsite",
"Carnevale",
"Cave",
"Central",
"Charm",
"Clothing",
"Clover",
"Composure",
"Condition",
"Conspirator",
"Creature",
"Criminal",
"Cultist",
"Curse",
"Cursed",
"Dark",
"Deep",
"Desperate",
"Detective",
"Developed",
"Dhole",
"Dreamlands",
"Drifter",
"Dunwich",
"Elite",
"Endtimes",
"Exhibit",
"Expert",
"Extradimensional",
"Eztli",
"Fated",
"Favor",
"Firearm",
"Flaw",
"Forgotten",
"Fortune",
"Gambit",
"Geist",
"Ghoul",
"Ground",
"Gug",
"Hazard",
"Hex",
"Historical",
"Human",
"Humanoid",
"Hunter",
"Illicit",
"Improvised",
"Injury",
"Innate",
"Insight",
"Instrument",
"Item",
"Jungle",
"Key",
"Lodge",
"Lunatic",
"Madness",
"Mask",
"Medic",
"Melee",
"Miskatonic",
"Monster",
"New",
"Nightgaunt",
"Obstacle",
"Occult",
"Omen",
"Otherworld",
"Pact",
"Paradox",
"Paris",
"Passageway",
"Patron",
"Performer",
"Poison",
"Police",
"Power",
"Practiced",
"Private",
"Rail",
"Relic",
"Reporter",
"Ritual",
"Riverside",
"Ruins",
"Scheme",
"Science",
"Second",
"Sentinel",
"Serpent",
"Servitor",
"Shoggoth",
"Silver",
"Song",
"Sorcerer",
"Spell",
"Spirit",
"Supply",
"Syndicate",
"Tactic",
"Talent",
"Task",
"Tentacle",
"Terror",
"Third",
"Tindalos",
"Tome",
"Tool",
"Train",
"Trap",
"Trick",
"Unhallowed",
"Upgrade",
"Venice",
"Veteran",
"Warden",
"Wayfarer",
"Weapon",
"Wilderness",
"Witch",
"Woods",
"Yithian",
"Abomination",
"Abscheulichkeit",
"Agencia",
"Agency",
"Agenzia",
"Aliado",
"Alleato",
"Allenamento",
"Ally",
"Altered",
"Amuleto",
"Ancient One",
"Anderswelt",
"Angeboren",
"Arkham",
"Arkham Asylum",
"Arma",
"Arma da Fuoco",
"Arma de fuego",
"Armatura",
"Armor",
"Artist",
"Artista",
"Assistant",
"Audaz",
"Aufgabe",
"Augurio",
"Augury",
"Ausstellung",
"Außerdimensional",
"Avatar",
"Ayudante",
"Bayou",
"Behörde",
"Believer",
"Bendecido",
"Blunder",
"Boat",
"Bold",
"Bridge",
"Buch",
"Byakhee",
"Bystander",
"Cacciatore",
"Canción",
"Carnevale",
"Cave",
"Cazador",
"Central",
"Charm",
"Ciencia",
"Clothing",
"Clover Club",
"Compostura",
"Composure",
"Condition",
"Condizione",
"Conspirator",
"Cospiratore",
"Creatura",
"Creature",
"Credente",
"Crepuscolo d&#039;Argento",
"Crepúsculo de Plata",
"Creyente",
"Criatura",
"Criminal",
"Criminale",
"Cuerpo a cuerpo",
"Cultist",
"Cultista",
"Curse",
"Dark Young",
"Deep One",
"Defecto",
"Desarrollado",
"Desesperado",
"Desperate",
"Detective",
"Developed",
"Dhole",
"Difetto",
"Dreamlands",
"Drifter",
"Dunwich",
"Elite",
"Endtimes",
"Endzeit",
"Entwickelt",
"Equivocación",
"Erkenntnis",
"Esperto",
"Espíritu",
"Estado",
"Exhibit",
"Experimentado",
"Experimientado",
"Expert",
"Experte",
"Experto",
"Extradimensional",
"Fated",
"Favor",
"Ferita",
"Feuerwaffe",
"Fin de los tiempos",
"Firearm",
"Flaw",
"Fluch",
"Follia",
"Fortuna",
"Fortune",
"Gambit",
"Gambito",
"Gefahr",
"Gegenstand",
"Geist",
"Gelassenheit",
"Ghoul",
"Gift",
"Glaubender",
"Glücksbringer",
"Glücksfall",
"Ground Floor",
"Großer Alter",
"Gug",
"Gul",
"Hazard",
"Hechicero",
"Hechizo",
"Herramienta",
"Herumtreiber",
"Hex",
"Hindernis",
"Historical Society",
"Human",
"Humanoid",
"Humanoide",
"Hunter",
"Ilegal",
"Illecito",
"Illegal",
"Illicit",
"Impresa",
"Improvisado",
"Improvised",
"Incantesimo",
"Injury",
"Innate",
"Innato",
"Insight",
"Inspiración",
"Instrument",
"Instrumento",
"Intrattenitore",
"Intuizione",
"Item",
"Jäger",
"Key",
"Kleidung",
"Kreatur",
"Krimineller",
"Kultist",
"Lesión",
"Lied",
"Locura",
"Lodge",
"Lunatic",
"Macht",
"Madness",
"Makel",
"Maldición",
"Maldito",
"Maledizione",
"Maleficio",
"Mask",
"Mecenas",
"Medic",
"Mejora",
"Melee",
"Mensch",
"Mischia",
"Miskatonic",
"Monster",
"Monstruo",
"Mäzen",
"Nahkampf",
"New Orleans",
"Nightgaunt",
"Objecto",
"Objeto",
"Obstacle",
"Obstáculo",
"Occult",
"Ocultismo",
"Oggetto",
"Omen",
"Otherworld",
"Pact",
"Pacto",
"Pakt",
"Paradoja",
"Paris",
"Passageway",
"Patron",
"Patto",
"Performer",
"Poison",
"Police",
"Policía",
"Polizei",
"Polizia",
"Power",
"Practiced",
"Predestinado",
"Presagio",
"Private",
"Protección",
"Protector",
"Rail",
"Relic",
"Relikt",
"Reliquia",
"Reporter",
"Reportero",
"Riesgo",
"Ritual",
"Riverside",
"Ropa",
"Rüstung",
"Scheme",
"Schlüssel",
"Schrecken",
"Science",
"Scienza",
"Scorta",
"Second Floor",
"Sectario",
"Sentinel Hill",
"Serpiente",
"Servidor",
"Servitor",
"Shoggoth",
"Shoggothe",
"Silberloge der Dämmerung",
"Silver Twilight",
"Sociedad Histórica",
"Song",
"Sorcerer",
"Sorte",
"Spell",
"Spirit",
"Spirito",
"Stregone",
"Strumento",
"Suministros",
"Supply",
"Sviluppato",
"Syndicate",
"Syndikat",
"Tactic",
"Taktik",
"Talent",
"Talent0",
"Talento",
"Tarea",
"Task",
"Tattica",
"Tentacle",
"Terror",
"Third Floor",
"Tindalos",
"Tome",
"Tomo",
"Tool",
"Train",
"Trainiert",
"Trampa",
"Trap",
"Trick",
"Trucchetto",
"Truco",
"Táctica",
"Ultimi Giorni",
"Umanoide",
"Unbeteiligter",
"Unhallowed",
"Vagabondo",
"Vagabundo",
"Venice",
"Verbündeter",
"Verletzung",
"Verschwörer",
"Verwünschung",
"Verzweifelt",
"Verändert",
"Vestiario",
"Veteran",
"Veterano",
"Viajero",
"Vorrat",
"Waffe",
"Wahnsinn",
"Warden",
"Wayfarer",
"Weapon",
"Werkzeug",
"Wilderness",
"Wissenschaft",
"Witch",
"Woods",
"Wälder",
"Yith",
"Yithian",
"Zauber",
"Zauberer",
"Zentral",
"Zug",
"Zustand",
"Ángel descarnado",
"Élite"
];

function sar($file){
	global $traits;
	//read the entire string
	$str = file_get_contents($file);
	//replace something in the file string - this is a VERY simple example
	foreach($traits as $trait){
		$str = str_replace("<i>".$trait."</i>", "[[".$trait."]]", $str);
	}
	//write the entire string
	file_put_contents($file, $str);
}

$iterator = new RecursiveIteratorIterator(new RecursiveDirectoryIterator('/opt/nrdb/dump/pack'));
foreach ($iterator as $file) {
	if ($file->isDir()) continue;
	$path = $file->getPathname();
	echo $path."\n";
	sar($path);
}

$iterator = new RecursiveIteratorIterator(new RecursiveDirectoryIterator('/opt/nrdb/dump/translations'));
foreach ($iterator as $file) {
	if ($file->isDir()) continue;
	$path = $file->getPathname();
	echo $path."\n";
	sar($path);
}

?>